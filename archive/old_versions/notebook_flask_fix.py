#!/usr/bin/env python3
"""
Notebook Flask App Fix
=====================

This shows exactly what to change in your notebook's Flask app cell.
"""

print("üîß NOTEBOOK FLASK APP FIX")
print("=" * 50)
print()
print("üìç LOCATION: Your notebook's Flask app cell")
print()
print("üîç FIND THIS CODE in your Flask app cell:")
print("----------------------------------------")
print("        if query_text:")
print("            # Query the agent")
print("            response = agent.chat(query_text)")
print()
print("‚úèÔ∏è  REPLACE WITH:")
print("----------------------------------------")
print("        if query_text:")
print("            # Query the agent using asyncio.run()")
print("            import asyncio")
print("            response = asyncio.run(agent.run(query_text))")
print()
print("üéØ COMPLETE FIXED HOME ROUTE:")
print("----------------------------------------")
print()
print("@app.route(\"/\", methods=[\"GET\", \"POST\"])")
print("def home():")
print("    response = None")
print("    if request.method == \"POST\":")
print("        query_text = request.form.get(\"text\", \"\")")
print("        if query_text:")
print("            # Query the agent using asyncio.run()")
print("            import asyncio")
print("            response = asyncio.run(agent.run(query_text))")
print("    return render_template_string(form_template, response=response)")
print()
print("üîß ALSO UPDATE THE PORT:")
print("----------------------------------------")
print("FIND: app.run(host=\"0.0.0.0\", port=5602)")
print("REPLACE: app.run(host=\"0.0.0.0\", port=5606)")
print()
print("‚úÖ STEPS TO APPLY THE FIX:")
print("----------------------------------------")
print("1. Open your notebook: http://localhost:8888/?token=6b0b2860e4d3651d12a81b31ae0180e496d40f2b32e46411")
print("2. Find the Flask app cell")
print("3. Make the changes shown above")
print("4. Save the notebook")
print("5. Run the Flask app cell")
print("6. Test at http://localhost:5606")
print()
print("üéâ This will fix the 'agent.chat()' error and async issues!")
